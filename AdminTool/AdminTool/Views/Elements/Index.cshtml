@using AdminTool.Models
@model IEnumerable<AdminTool.Models.ElementVm>

<h2>Element</h2>

<div class="table-scroll">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Key</th>
                <th>Label</th>
                <th>IconImage</th>
                <th>ColorHex</th>
                <th>SortOrder</th>
                <th>IsActive</th>
                <th>Meta</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var element in Model)
            {
                <tr>
                    <td>@element.Key</td>
                    <td>@element.Label</td>
                    <td>
                        @if (!string.IsNullOrEmpty(element.IconUrl))
                        {
                            <img src="@element.IconUrl" alt="@element.Key icon"
                                 style="width:28px;height:28px;object-fit:contain;border:1px solid #eee;border-radius:4px;" />
                        }
                        else
                        {
                            <span class="text-muted">-</span>
                        }
                    </td>
                    <td>
                        <span style="display:inline-block;width:16px;height:16px;border:1px solid #ccc;background:@element.ColorHex"></span>
                        <span class="ms-1">@element.ColorHex</span>
                    </td>
                    <td>@element.SortOrder</td>
                    <td>
                        @if (element.IsActive)
                        {
                            <span class="badge bg-success">Active</span>
                        }
                        else
                        {
                            <span class="badge bg-secondary">Inactive</span>
                        }
                    </td>
                    <td>
                        <code class="small">@element.Meta</code> @* 혹시 뷰모델이 MetaJson이면 .MetaJson로 *@
                    </td>
                    <td>
                        <a asp-action="Edit" asp-route-id="@element.ElementId" class="btn btn-sm btn-outline-primary">
                            <i class="bi bi-pencil"></i> 수정
                        </a>

                        <form asp-action="Delete" asp-route-id="@element.ElementId" method="post" style="display:inline;">
                            @Html.AntiForgeryToken()
                            <button type="submit" class="btn btn-sm btn-danger"
                                    onclick="return confirm('정말 삭제할까요?');">
                                삭제
                            </button>
                        </form>>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<a asp-controller="Elements" asp-action="Create" class="btn btn-primary mt-3">Create</a>